#!/bin/bash
#              _       _
#  _ __   ___ | |_   _| |__   __ _ _ __      _ ____   __
# | '_ \ / _ \| | | | | '_ \ / _` | '__|____| '_ \ \ / /
# | |_) | (_) | | |_| | |_) | (_| | | |_____| |_) \ V /
# | .__/ \___/|_|\__, |_.__/ \__,_|_|       | .__/ \_/
# |_|            |___/                      |_|
##

server=$(grep connected_server ~/.pvpn-cli/pvpn-cli.cfg | cut -d' ' -f3)
[ -z "$server" ] && exit 1
declare -A flags
flags[CA]=ğŸ‡¨ğŸ‡¦
flags[CH]=ğŸ‡¨ğŸ‡­
flags[DE]=ğŸ‡©ğŸ‡ª
flags[FR]=ó¾“§
flags[HK]=ğŸ‡­ğŸ‡°
flags[HU]=ğŸ‡­ğŸ‡º
flags[IS]=ğŸ‡®ğŸ‡¸
flags[NL]=ôš‘
flags[SE]=ğŸ‡¸ğŸ‡ª
flags[SG]=ğŸ‡¸ğŸ‡¬
flags[UK]=ó¾“ª
flags[US]=ó¾“¦
flags[CH_UK]=ğŸ‘»

load=$(jq -r ".LogicalServers[] | select(.Name==\"$server\").Load" ~/.pvpn-cli/serverinfo.json)
echo "${flags[$(echo "$server" | cut -d'#' -f1)]} $load%"

