#!/bin/bash

###
# MONITORS
monitors="$(bspc query --monitors --names)"
n_monitors="$(echo "$monitors" | wc -l)"
if (( n_monitors == 2 )); then
    hdmi=$(grep HDMI <<< "$monitors")
    main=$(grep eDP <<< "$monitors")

    xrandr --output "$hdmi" --auto --above "$main"
    
    bspc monitor "$main"  -d VI VII VIII IX X
    bspc monitor "$hdmi" -d I II III IV V

    bspc desktop -f 1
else
    bspc monitor -d I II III IV V VI VII VIII IX X
fi

###
# BSPC
bspc config border_width 0
bspc config window_gap   10

# Multihead behavior
bspc config remove_disabled_monitors  true
bspc config remove_unplugged_monitors true

bspc config split_ratio             0.5
bspc config borderless_monocle      true
bspc config gapless_monocle         true
bspc config automatic_scheme        spiral
bspc config pointer_follows_focus   true
bspc config pointer_modifier        mod1
bspc config pointer_action1         move
bspc config pointer_action2         resize_corner

bspc rule -a Zathura state=tiled
function float { bspc rule -a "$1" state=floating; }
float jetbrains-toolbox
float ckb-next
float Steam
float DiscordCanary
float discord
float vlc

###
# init programs
function run { pgrep -x "$1" || "$@" & }
run sxhkd
run /home/jay/.config/polybar/launch.sh
run picom -bc --experimental-backends
run nitrogen --restore
run ckb-next -b
run lxpolkit
run xbanish
run bluetooth off
run wifi off
run cleanfullscreen

# focus 2nd desktop
bspc desktop -f II

